# 🚀 Gemini CLI Docker 前端管理界面

这是一个现代化的 Web 界面，用于管理 Gemini CLI Docker 环境，提供完整的可视化操作体验。

## ✨ 功能特性

### 🖥️ 环境管理
- **创建环境**: 一键创建新的 Docker 容器环境
- **环境选择**: 可视化选择和切换不同的环境
- **环境删除**: 安全删除不需要的环境
- **状态监控**: 实时显示环境运行状态

### 🔧 配置管理
- **Git 配置**: 
  - 配置 Git 仓库地址
  - SSH 私钥管理（用于私有仓库）
  - 一键克隆仓库到工作区
- **Gemini 配置**:
  - Gemini API Token 配置
  - 连接状态实时监控
  - API 配置验证

### 🤖 AI 交互界面
- **持久会话**: 支持上下文记忆的对话
- **实时聊天**: 类似 ChatGPT 的交互体验
- **代码高亮**: 自动识别和高亮代码块
- **会话管理**: 查看状态、重置会话
- **消息历史**: 完整的对话记录

### 📁 文件操作
- **文件浏览**: 可视化浏览工作区文件
- **文件查看**: 点击查看文件内容
- **代码执行**: 直接执行 Python 等代码
- **执行结果**: 实时显示执行输出和错误

## 🚀 快速开始

### 1. 启动后端服务
```bash
# 在项目根目录
python main.py
```

### 2. 启动前端界面
```bash
# 在项目根目录
python frontend/server.py
```

### 3. 访问界面
打开浏览器访问: http://localhost:8080

## 📖 使用指南

### 步骤 1: 创建环境
1. 点击 "创建新环境" 按钮
2. 等待环境创建完成（约 8 秒）
3. 点击 "选择" 按钮激活环境

### 步骤 2: 配置 Git（可选）
1. 切换到 "Git 配置" 标签
2. 输入 Git 仓库地址
3. 如果是私有仓库，粘贴 SSH 私钥
4. 点击 "克隆仓库"

### 步骤 3: 配置 Gemini
1. 切换到 "Gemini 配置" 标签
2. 输入你的 Gemini API Token
3. 点击 "配置 Gemini"
4. 等待配置成功提示

### 步骤 4: 开始 AI 对话
1. 在聊天界面输入你的问题
2. 按 Ctrl+Enter 或点击发送
3. 查看 AI 回复和生成的代码
4. 使用文件操作查看和执行代码

## 🎯 界面功能详解

### 环境管理区域
- **环境列表**: 显示所有创建的环境
- **环境状态**: 绿点表示运行中，红点表示已停止
- **环境信息**: 显示端口号和创建时间
- **操作按钮**: 选择环境或删除环境

### 配置区域
- **标签切换**: Git 配置和 Gemini 配置
- **表单验证**: 自动验证输入内容
- **状态指示**: 实时显示配置状态
- **帮助链接**: 直接链接到 API 获取页面

### 聊天区域
- **消息气泡**: 区分用户和 AI 消息
- **代码高亮**: 自动识别代码块
- **时间戳**: 显示消息发送时间
- **会话控制**: 查看状态、重置会话

### 文件操作区域
- **文件列表**: 树形显示工作区文件
- **文件图标**: 根据文件类型显示不同图标
- **快速操作**: 列出文件、执行代码
- **结果显示**: 在聊天区域显示操作结果

## 🛠️ 技术特性

### 前端技术栈
- **HTML5**: 语义化标记
- **CSS3**: 现代化样式，支持响应式设计
- **Vanilla JavaScript**: 无框架依赖，纯原生 JS
- **Font Awesome**: 丰富的图标库
- **Prism.js**: 代码语法高亮

### 设计特点
- **响应式设计**: 支持桌面和移动设备
- **现代化 UI**: 卡片式布局，渐变色彩
- **交互反馈**: 加载状态、Toast 通知
- **键盘快捷键**: Ctrl+Enter 发送消息
- **实时状态**: 连接状态、时间显示

### API 集成
- **RESTful API**: 完整的后端 API 调用
- **错误处理**: 友好的错误提示
- **状态管理**: 客户端状态同步
- **异步操作**: 非阻塞用户界面

## 🔧 自定义配置

### 修改服务端口
```python
# 在 frontend/server.py 中修改
PORT = 8080  # 改为你想要的端口
```

### 修改 API 地址
```javascript
// 在 frontend/app.js 中修改
const CONFIG = {
    API_BASE_URL: 'http://localhost:8081',  // 改为你的后端地址
    // ...
};
```

## 🐛 故障排除

### 常见问题

1. **无法连接到后端服务**
   - 确保后端服务在 http://localhost:8081 运行
   - 检查防火墙设置
   - 查看浏览器控制台错误信息

2. **环境创建失败**
   - 确保 Docker 服务正在运行
   - 检查 agent-service:latest 镜像是否存在
   - 查看后端服务日志

3. **Gemini 配置失败**
   - 验证 API Token 是否正确
   - 检查网络连接
   - 确认 API 配额是否充足

4. **Git 克隆失败**
   - 检查仓库地址是否正确
   - 验证 SSH 私钥格式
   - 确认网络访问权限

### 调试技巧
- 打开浏览器开发者工具查看控制台日志
- 检查网络请求状态
- 查看后端服务日志输出

## 📝 开发说明

### 文件结构
```
frontend/
├── index.html      # 主页面
├── styles.css      # 样式文件
├── app.js         # 主要逻辑
├── server.py      # 静态服务器
└── README.md      # 说明文档
```

### 扩展功能
如果需要添加新功能，可以：
1. 在 `app.js` 中添加新的管理器模块
2. 在 `index.html` 中添加对应的 UI 元素
3. 在 `styles.css` 中添加样式定义

## 🎉 总结

这个前端界面提供了完整的 Gemini CLI Docker 环境管理功能，包括：

✅ **环境管理**: 创建、选择、删除环境  
✅ **Git 集成**: 仓库克隆、SSH 密钥支持  
✅ **Gemini 配置**: API Token 管理、状态监控  
✅ **AI 交互**: 持久会话、代码高亮、实时对话  
✅ **文件操作**: 浏览、查看、执行代码  
✅ **现代化 UI**: 响应式设计、友好交互  

现在你可以通过浏览器完全管理你的 AI 开发环境，享受可视化的开发体验！
